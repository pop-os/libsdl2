From: Sylvain <sylvain.becker@gmail.com>
Date: Tue, 27 Sep 2022 10:21:15 +0200
Subject: Fixed bug #6287 - SDL_FillRect failed for SDL_Surface with
 BitsPerPixel == 4

(cherry-picked from commit d71df6448b04d756555d9d9d285ba4c36b7e9f61)
Origin: upstream, 2.24.1, commit:0f2503cf8ad4407550f7cfae99f2dc26587caf59
---
 src/video/SDL_fillrect.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/video/SDL_fillrect.c b/src/video/SDL_fillrect.c
index 6698511..222d69e 100644
--- a/src/video/SDL_fillrect.c
+++ b/src/video/SDL_fillrect.c
@@ -329,7 +329,7 @@ SDL_FillRects(SDL_Surface * dst, const SDL_Rect * rects, int count,
     if (dst->format->BitsPerPixel < 8) {
         if (count == 1) {
             const SDL_Rect *r = &rects[0];
-            if (r->x == 0 && r->y == 0 && r->w == dst->w && r->w == dst->h) {
+            if (r->x == 0 && r->y == 0 && r->w == dst->w && r->h == dst->h) {
                 if (dst->format->BitsPerPixel == 4) {
                     Uint8 b = (((Uint8) color << 4) | (Uint8) color);
                     SDL_memset(dst->pixels, b, dst->h * dst->pitch);
